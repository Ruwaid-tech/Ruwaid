{% extends 'base.html' %}
{% block content %}
<section class="filter-row">
    <form method="get" class="filter-form">
        <input type="text" name="search" placeholder="Search" value="{{ search }}">
        <select name="category">
            <option value="All" {% if category=='All' %}selected{% endif %}>All</option>
            {% for cat in categories %}
            <option value="{{ cat }}" {% if category==cat %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>
        <select name="sort">
            <option value="">Sort</option>
            <option value="asc" {% if sort=='asc' %}selected{% endif %}>Price ↑</option>
            <option value="desc" {% if sort=='desc' %}selected{% endif %}>Price ↓</option>
        </select>
        <button type="submit">Apply</button>
    </form>
</section>
<section class="gallery">
    {% for art in artworks %}
    <div class="card">
        <img src="{{ art['image_url'] }}" alt="{{ art['title'] }}">
        <div class="card-body">
            <h3>{{ art['title'] }}</h3>
            <p class="price">₹{{ '%.2f'|format(art['price']) }}</p>
            <p class="desc">{{ art['description'] }}</p>
            <div class="card-actions">
                <a class="btn" href="{{ url_for('artwork_detail', artwork_id=art['id']) }}">View Details</a>
                <form method="post" action="{{ url_for('cart_add', artwork_id=art['id']) }}">
                    <button type="submit" class="btn secondary">Add</button>
                </form>
            </div>
        </div>
    </div>
    {% else %}
    <p>No artworks found.</p>
    {% endfor %}
</section>
<div class="cta-row">
    <a class="btn" href="{{ url_for('cart_view') }}">Cart</a>
    <a class="btn secondary" href="{{ url_for('cart_view') }}">Checkout</a>
</div>
{% endblock %}
