{% extends 'base.html' %}
{% block header %}
<header class="site-header admin">
    <div class="logo">Order Detail</div>
    <nav class="main-nav">
        <a href="{{ url_for('admin_orders') }}">Orders</a>
        <a href="{{ url_for('admin_artworks') }}">Artworks</a>
        <a href="{{ url_for('admin_settings') }}">Settings</a>
        <a href="{{ url_for('logout') }}">Logout</a>
    </nav>
</header>
{% endblock %}
{% block content %}
<h1>Order {{ order['order_code'] }}</h1>
<div class="order-info">
    <p><strong>Buyer:</strong> {{ order['buyer_name'] }}</p>
    <p><strong>Phone:</strong> {{ order['phone'] }}</p>
    <p><strong>Address:</strong> {{ order['address'] }}</p>
    <p><strong>Status:</strong> {{ order['status'] }}</p>
    <p><strong>Date:</strong> {{ order['created_at'] }}</p>
</div>
<form method="post" class="status-form">
    <label>Update Status</label>
    <select name="status">
        <option value="Pending COD" {% if order['status']=='Pending COD' %}selected{% endif %}>Pending COD</option>
        <option value="Completed" {% if order['status']=='Completed' %}selected{% endif %}>Completed</option>
    </select>
    <button type="submit" class="btn">Save</button>
</form>
<h2>Items</h2>
<table class="table">
    <tr><th>Artwork</th><th>Qty</th><th>Unit Price</th><th>Line Total</th></tr>
    {% for line in lines %}
    <tr>
        <td>{{ line['title'] }}</td>
        <td>{{ line['quantity'] }}</td>
        <td>₹{{ '%.2f'|format(line['unit_price']) }}</td>
        <td>₹{{ '%.2f'|format(line['quantity'] * line['unit_price']) }}</td>
    </tr>
    {% endfor %}
    <tr><td colspan="3" class="text-right"><strong>Total</strong></td><td><strong>₹{{ '%.2f'|format(total) }}</strong></td></tr>
</table>
{% endblock %}
