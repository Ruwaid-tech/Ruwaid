{% extends 'base.html' %}
{% block content %}
<div class="admin-nav">
    <a href="{{ url_for('admin_dashboard') }}">Dashboard</a>
    <a href="{{ url_for('admin_orders') }}">Orders</a>
    <a href="{{ url_for('admin_artworks') }}">Artworks</a>
    <a href="{{ url_for('admin_settings') }}">Settings</a>
    <a href="{{ url_for('logout') }}">Logout</a>
</div>
<section class="panel">
    <div class="panel-header">
        <h1>{{ 'Edit Artwork' if artwork else 'Add Artwork' }}</h1>
        <a class="btn ghost" href="{{ url_for('admin_dashboard') }}">Back to Dashboard</a>
    </div>
    <form class="admin-form" method="post" enctype="multipart/form-data">
        <label>Title</label>
        <input type="text" name="title" value="{{ artwork['title'] if artwork else '' }}" required>
        {% if errors.get('title') %}<p class="error">{{ errors['title'] }}</p>{% endif %}
        <label>Description</label>
        <textarea name="description" required>{{ artwork['description'] if artwork else '' }}</textarea>
        {% if errors.get('description') %}<p class="error">{{ errors['description'] }}</p>{% endif %}
        <label>Category</label>
        <input type="text" name="category" value="{{ artwork['category'] if artwork else '' }}" required>
        {% if errors.get('category') %}<p class="error">{{ errors['category'] }}</p>{% endif %}
        <label>Price</label>
        <input type="number" step="0.01" name="price" value="{{ artwork['price'] if artwork else '' }}" required>
        {% if errors.get('price') %}<p class="error">{{ errors['price'] }}</p>{% endif %}
        <label>Stock</label>
        <input type="number" name="stock" value="{{ artwork['stock'] if artwork else '' }}" required>
        {% if errors.get('stock') %}<p class="error">{{ errors['stock'] }}</p>{% endif %}
        <label>Image URL (optional)</label>
        <input type="text" name="image_url" value="{{ artwork['image_url'] if artwork else '' }}">
        <label>Upload Image</label>
        <input type="file" name="image_file" accept="image/*">
        {% if errors.get('image_file') %}<p class="error">{{ errors['image_file'] }}</p>{% endif %}
        <input type="hidden" name="existing_image" value="{{ artwork['image_url'] if artwork else '' }}">
        {% if artwork %}
        <div class="preview">
            <img src="{{ artwork['image_url'] }}" alt="Current image">
        </div>
        {% endif %}
        <button class="btn primary" type="submit">Save</button>
        <a class="btn ghost" href="{{ url_for('admin_artworks') }}">Cancel</a>
    </form>
</section>
{% endblock %}
